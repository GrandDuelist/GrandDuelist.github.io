<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title><![CDATA[Solve Latex Pakcage not found by tlmgr]]></title>
      <url>/2018/01/21/Solve-Latex-Pakcage-not-found-by-tlmgr/</url>
      <content type="html"><![CDATA[<p>When installing latex packages for Latex. Users can either install texlive-basics or full version texlive. However, the basic version is light version uses much less strorage. Instead, full version texlive covers most of packages but more storage on disk.</p>
<h2 id="Install-texlive-basic"><a href="#Install-texlive-basic" class="headerlink" title="Install texlive-basic"></a>Install texlive-basic</h2><p>I choose to install texlive-basic and install the packages required for my Latex file.</p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tlmgr install fontaxes</span><br></pre></td></tr></table></figure>
<p>Then it shows<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">! LaTeX Error: File `fontaxes.sty<span class="string">' not found.Type X to quit or &lt;RETURN&gt; to proceed,or enter new name. (Default extension: sty)Enter file name:! Emergency stop.&lt;read &gt; \fi</span></span><br></pre></td></tr></table></figure></p>
<h2 id="Package-not-found-by-tlmgr"><a href="#Package-not-found-by-tlmgr" class="headerlink" title="Package not found by tlmgr"></a>Package not found by tlmgr</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tlmgr install: package fontaxes.sty not present <span class="keyword">in</span> repository.</span><br></pre></td></tr></table></figure>
<p>We can search the file name directly and manually installs the <code>.sty</code> package.</p>
<ol>
<li>Search the <code>.sty</code> file and save it locally</li>
<li>Find the Latex package libary location in the computer by following commands.</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kpsewhich nccfoots.sty</span><br></pre></td></tr></table></figure>
<p>where <code>nccfoots.sty</code> can be replaced by any installed package.</p>
<p>It returns like following result</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/texlive/2017basic/texmf-dist/tex/latex/nccfoots/nccfoots.sty</span><br></pre></td></tr></table></figure>
<p>Therefore the libary directory is </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/texlive/2017basic/texmf-dist/tex/latex/</span><br></pre></td></tr></table></figure>
<p>go to the directory<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/texlive/2017basic/texmf-dist/tex/latex/</span><br></pre></td></tr></table></figure></p>
<p>create a folder with same name in the libary directory.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir fontaxes</span><br></pre></td></tr></table></figure></p>
<p>copy <code>fontaxes.sty</code> in the folder<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp fontaxes.sty /usr/<span class="built_in">local</span>/texlive/2017basic/texmf-dist/tex/latex/fontaxes</span><br></pre></td></tr></table></figure></p>
<p>register the package.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">texhash fontaxes.sty</span><br></pre></td></tr></table></figure></p>
<p>The package dependency problem will be solved.</p>
]]></content>
      
        <categories>
            
            <category> setup </category>
            
        </categories>
        
        
        <tags>
            
            <tag> latex </tag>
            
            <tag> dependencies </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[create a python package and upload with PyPI]]></title>
      <url>/2017/11/22/create-a-python-package-and-upload-with-PyPI/</url>
      <content type="html"><![CDATA[<p>Recently I want to manage some frequent used code and pacakge them and install them  on cross platforms.</p>
<h2 id="Creat-a-Project-and-Setup-File"><a href="#Creat-a-Project-and-Setup-File" class="headerlink" title="Creat a Project and Setup File"></a>Creat a Project and Setup File</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$mkdir</span> cps</span><br><span class="line"><span class="variable">$cd</span> cps</span><br><span class="line"><span class="variable">$touch</span> setup.py</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="Creat-Pacakge-Folder"><a href="#Creat-Pacakge-Folder" class="headerlink" title="Creat Pacakge Folder"></a>Creat Pacakge Folder</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$mkdir</span> cpssdk</span><br></pre></td></tr></table></figure>
<h2 id="Put-your-Code-in-Package"><a href="#Put-your-Code-in-Package" class="headerlink" title="Put your Code in Package"></a>Put your Code in Package</h2><p>Go into the package folder<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cd</span> cpssdk</span><br></pre></td></tr></table></figure></p>
<p>creat a init file for package index<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$touch __init__.py</span><br></pre></td></tr></table></figure></p>
<p>then put your code in a python file<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$touch</span> cpstime.py</span><br><span class="line"><span class="variable">$vim</span> cpstime.py</span><br></pre></td></tr></table></figure></p>
<p>This is my code<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> timedelta</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CPSTime</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parseTime</span><span class="params">(self,timeStr)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> datetime.strptime(timeStr,<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parseTimeToStr</span><span class="params">(self,time_value)</span>:</span></span><br><span class="line">        <span class="keyword">return</span>(time_value.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">oneDayToSeconds</span><span class="params">(self,time_str)</span>:</span></span><br><span class="line">        time = datetime.strptime(time_str,<span class="string">'%H:%M:%S'</span>)</span><br><span class="line">        time_zero = datetime.strptime(<span class="string">'00:00:00'</span>,<span class="string">'%H:%M:%S'</span>)</span><br><span class="line">        <span class="keyword">return</span>((time-time_zero).total_seconds())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">timeSlot</span><span class="params">(self,time=None,t_hour = None, t_min=None,t_sec = None)</span>:</span></span><br><span class="line">        divide_min = self.timeToMin(t_hour,t_min,t_sec)</span><br><span class="line">        start_min = self.timeToMin(time.hour,time.minute,time.second)</span><br><span class="line">        slot = int(start_min/divide_min)</span><br><span class="line">        <span class="keyword">return</span>(slot)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">timeToMin</span><span class="params">(self,t_hour=None,t_min=None,t_sec=None)</span>:</span></span><br><span class="line">        total_min = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> t_hour <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            total_min = total_min + t_hour * <span class="number">60</span></span><br><span class="line">        <span class="keyword">if</span> t_min <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            total_min = total_min + t_min</span><br><span class="line">        <span class="keyword">if</span> t_sec <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            total_min = float(total_min) + float(t_sec)/float(<span class="number">60</span>)</span><br><span class="line">        <span class="keyword">return</span>(total_min)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">timeDifferenceToSeconds</span><span class="params">(self,start_time,end_time)</span>:</span></span><br><span class="line">        <span class="keyword">return</span>((end_time - start_time).total_seconds())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">changeTimeSlot</span><span class="params">(self,time_slot,orig_time_granularity,new_time_granularity)</span>:</span></span><br><span class="line">        new_time_slot = (time_slot * orig_time_granularity)/new_time_granularity</span><br><span class="line">        <span class="keyword">return</span>(int(new_time_slot))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">timeSlotToTime</span><span class="params">(self,time_slot,time_slot_granularity=<span class="number">1</span>,start_time = None)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start_time <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            time_zero = datetime.strptime(<span class="string">'00:00:00'</span>,<span class="string">'%H:%M:%S'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            time_zero = start_time</span><br><span class="line">        time_dif = timedelta(seconds = time_slot * time_slot_granularity)</span><br><span class="line">        time = time_zero+time_dif</span><br><span class="line">        <span class="comment"># return(datetime.time(time))</span></span><br><span class="line">        <span class="keyword">return</span>(time)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">equalTimeSeparator</span><span class="params">(self,start_time,end_time,interval_seconds = <span class="number">600</span>)</span>:</span></span><br><span class="line">        result = []</span><br><span class="line">        time_dif = timedelta(seconds = interval_seconds)</span><br><span class="line">        one_time = start_time</span><br><span class="line">        <span class="keyword">while</span>(one_time &lt; end_time):</span><br><span class="line">            result.append(one_time)</span><br><span class="line">            one_time = one_time + time_dif</span><br><span class="line">        result.append(one_time)</span><br><span class="line">        <span class="keyword">return</span>(result)</span><br></pre></td></tr></table></figure></p>
<h2 id="Fill-Package-Setup-Information"><a href="#Fill-Package-Setup-Information" class="headerlink" title="Fill Package Setup Information"></a>Fill Package Setup Information</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$vim</span> setup.py</span><br></pre></td></tr></table></figure>
<p>input following information<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">setup(</span><br><span class="line">    name = <span class="string">"cpstime"</span>,</span><br><span class="line">    version = <span class="string">"0.0.1"</span>,</span><br><span class="line">    keywords = (<span class="string">"pip"</span>, <span class="string">"datacanvas"</span>, <span class="string">"eds"</span>, <span class="string">"xiaoh"</span>),</span><br><span class="line">    description = <span class="string">"cps time processing package"</span>,</span><br><span class="line">    long_description = <span class="string">"read time and calculate trip duration package in cyber physical system processing"</span>,</span><br><span class="line">    license = <span class="string">"MIT Licence"</span>,</span><br><span class="line">    </span><br><span class="line">    url = <span class="string">"http://zhihanfang.com"</span>,</span><br><span class="line">    author = <span class="string">"ogre"</span>,</span><br><span class="line">    author_email = <span class="string">"ezhihan@gmail.com"</span>,</span><br><span class="line">    </span><br><span class="line">    packages = find_packages(),</span><br><span class="line">    include_package_data = <span class="keyword">True</span>,</span><br><span class="line">    platforms = <span class="string">"any"</span>,</span><br><span class="line">    install_requires = [<span class="string">'datetime'</span>]</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>The file tree is as follows.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">└── cps</span><br><span class="line">    ├── cpssdk</span><br><span class="line">    │   ├── __init__.py</span><br><span class="line">    │   └── cpstime.py</span><br><span class="line">    └── setup.py</span><br></pre></td></tr></table></figure></p>
<h2 id="Install-and-Test-locally"><a href="#Install-and-Test-locally" class="headerlink" title="Install and Test locally"></a>Install and Test locally</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$python</span> setup.py install</span><br></pre></td></tr></table></figure>
<h2 id="Upload-to-PyPi"><a href="#Upload-to-PyPi" class="headerlink" title="Upload to PyPi"></a>Upload to PyPi</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ python setup.py register</span><br><span class="line">$ python setup.py sdist <span class="comment"># generate pip file</span></span><br><span class="line">$ python setup.py sdist upload <span class="comment"># generate pip file and upload</span></span><br></pre></td></tr></table></figure>
<p>if you have authentication problem, create  a ~/.pypirc file in your home directory.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[distutils]</span><br><span class="line">index-servers =</span><br><span class="line">  pypi</span><br><span class="line">  pypitest</span><br><span class="line"></span><br><span class="line">[pypi]</span><br><span class="line">repository=https://upload.pypi.org/legacy/</span><br><span class="line">username=your_username</span><br><span class="line">password=your_password</span><br><span class="line"></span><br><span class="line">[pypitest]</span><br><span class="line">repository=https://testpypi.python.org/pypi</span><br><span class="line">username=your_username</span><br><span class="line">password=your_password</span><br></pre></td></tr></table></figure></p>
<p>You may need to change repository url based on information returned.</p>
<h2 id="Update-your-Code"><a href="#Update-your-Code" class="headerlink" title="Update your Code"></a>Update your Code</h2><p>Change the version and upload the package again.</p>
]]></content>
      
        <categories>
            
            <category> setup </category>
            
        </categories>
        
        
        <tags>
            
            <tag> package </tag>
            
            <tag> python </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Kth Largest Element in an Array]]></title>
      <url>/2017/11/17/Kth-Largest-Element-in-an-Array/</url>
      <content type="html"><![CDATA[<p>The problem to find the kth largest element in an unsorted array. Note that it is the kth largest element in the sorted order, not the kth distinct element.</p>
<p>For example,<br>Given [3,2,1,5,6,4] and k = 2, return 5.</p>
<a id="more"></a>
<h1 id="Simplest-Solution-Sort-and-Index"><a href="#Simplest-Solution-Sort-and-Index" class="headerlink" title="Simplest Solution - Sort and Index"></a>Simplest Solution - Sort and Index</h1><p>The most straightforward solution to this problem is sort and return the $k$ element in the sorted list.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findKthLargest</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    :type nums: List[int]</span></span><br><span class="line"><span class="string">    :type k: int</span></span><br><span class="line"><span class="string">    :rtype: int</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    nums.sort()</span><br><span class="line">    <span class="keyword">return</span>(nums[len(nums)-k])</span><br></pre></td></tr></table></figure></p>
<p>The performance is as follows.<br><img src="/2017/11/17/Kth-Largest-Element-in-an-Array/sort.png" title="Schema"></p>
<p>The complexity of the time is $O(nlogn)$ and space is $O(1)$. The runtime of the algorithm is not too bad in the testcases. </p>
<h1 id="Partition-Solution"><a href="#Partition-Solution" class="headerlink" title="Partition Solution"></a>Partition Solution</h1><p>As we know, the general complexity of sort algorithm $nlogn$. But we actually dont need the sort the whole list. In this case, we can find any $k$ instead of particular k. Therefore, we can better instead of sorting whole list.  One popular sorting algorithm is quick sort. We can look into details of the algorithm. </p>
<p>In quick sort, it keeps partitioning the list based on a pivot. The numbers that are bigger than the pivot will be put in the left $i+1$ and other numbers will be put in the right.<br>Combining the partition step and binary search, we can keep the process untill the number of left we put in the left is $k$. Here is the implementation. </p>
<p>The complexity if $O(n)$ in time and $O(1)$ in space.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findKthLargest</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :type k: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">exchange</span><span class="params">(nums,a,b)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> nums[a] != nums[b]:</span><br><span class="line">                nums[a] = nums[a] ^ nums[b]</span><br><span class="line">                nums[b] = nums[a] ^ nums[b]</span><br><span class="line">                nums[a] = nums[a] ^ nums[b]</span><br><span class="line">                </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(nums,lo,hi)</span>:</span></span><br><span class="line">            pivot = nums[hi]</span><br><span class="line">            ii = lo - <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> jj <span class="keyword">in</span> xrange(lo,hi):</span><br><span class="line">                <span class="keyword">if</span> nums[jj] &gt; pivot: </span><br><span class="line">                    ii += <span class="number">1</span></span><br><span class="line">                    exchange(nums,ii,jj)</span><br><span class="line">            <span class="keyword">if</span> nums[hi] &gt; nums[ii+<span class="number">1</span>]:</span><br><span class="line">                exchange(nums,ii+<span class="number">1</span>,hi)</span><br><span class="line">            <span class="keyword">return</span>(ii+<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> len(nums) &lt; k:</span><br><span class="line">            <span class="keyword">return</span>(<span class="keyword">None</span>)</span><br><span class="line">        lo = <span class="number">0</span>; hi = len(nums) <span class="number">-1</span></span><br><span class="line">        <span class="keyword">while</span>(lo &lt;= hi):</span><br><span class="line">            mid = partition(nums,lo,hi)</span><br><span class="line">            <span class="keyword">if</span> mid == k<span class="number">-1</span>:</span><br><span class="line">                <span class="keyword">return</span>(nums[mid])</span><br><span class="line">            <span class="keyword">elif</span> mid &lt; k<span class="number">-1</span>: <span class="comment">#less than k in the left, keep to partition the right</span></span><br><span class="line">                lo = mid + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                hi = mid - <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span>(nums[lo])</span><br></pre></td></tr></table></figure>
<h1 id="Ganrantee-the-Average-Performance"><a href="#Ganrantee-the-Average-Performance" class="headerlink" title="Ganrantee the Average Performance"></a>Ganrantee the Average Performance</h1><p>The common way to avoid the effect of worst cases in sorting can be applied here too. We can randomize the input to avoid the worst case.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findKthLargest</span><span class="params">(self, nums, k)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :type k: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">exchange</span><span class="params">(nums,a,b)</span>:</span></span><br><span class="line">            <span class="keyword">if</span> nums[a] != nums[b]:</span><br><span class="line">                nums[a] = nums[a] ^ nums[b]</span><br><span class="line">                nums[b] = nums[a] ^ nums[b]</span><br><span class="line">                nums[a] = nums[a] ^ nums[b]</span><br><span class="line">                </span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(nums,lo,hi)</span>:</span></span><br><span class="line">            pivot = nums[hi]</span><br><span class="line">            ii = lo - <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> jj <span class="keyword">in</span> xrange(lo,hi):</span><br><span class="line">                <span class="keyword">if</span> nums[jj] &gt; pivot: </span><br><span class="line">                    ii += <span class="number">1</span></span><br><span class="line">                    exchange(nums,ii,jj)</span><br><span class="line">            <span class="keyword">if</span> nums[hi] &gt; nums[ii+<span class="number">1</span>]:</span><br><span class="line">                exchange(nums,ii+<span class="number">1</span>,hi)</span><br><span class="line">            <span class="keyword">return</span>(ii+<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> len(nums) &lt; k:</span><br><span class="line">            <span class="keyword">return</span>(<span class="keyword">None</span>)</span><br><span class="line">        random.shuffle(nums)</span><br><span class="line">        lo = <span class="number">0</span>; hi = len(nums) <span class="number">-1</span></span><br><span class="line">        <span class="keyword">while</span>(lo &lt;= hi):</span><br><span class="line">            mid = partition(nums,lo,hi)</span><br><span class="line">            <span class="keyword">if</span> mid == k<span class="number">-1</span>:</span><br><span class="line">                <span class="keyword">return</span>(nums[mid])</span><br><span class="line">            <span class="keyword">elif</span> mid &lt; k<span class="number">-1</span>: <span class="comment">#less than k in the left, keep to partition the right</span></span><br><span class="line">                lo = mid + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                hi = mid - <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span>(nums[lo])</span><br></pre></td></tr></table></figure></p>
<p>The performance is as follows.</p>
<img src="/2017/11/17/Kth-Largest-Element-in-an-Array/partition.png" title="Schema">]]></content>
      
        <categories>
            
            <category> algorithm </category>
            
        </categories>
        
        
        <tags>
            
            <tag> search </tag>
            
            <tag> partition </tag>
            
            <tag> leetcode </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Understand Tensor Decomposition]]></title>
      <url>/2017/11/16/Understand-Tensor-Decomposition/</url>
      <content type="html"></content>
      
        <categories>
            
            <category> research </category>
            
        </categories>
        
        
        <tags>
            
            <tag> linear algebra </tag>
            
            <tag> vector space </tag>
            
            <tag> research </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Advanced Sql Programming Problems and Solutions]]></title>
      <url>/2015/09/19/some%20advanced%20sql%20programming/</url>
      <content type="html"><![CDATA[<blockquote>
<p>description: The sql schema we used here is a bar-beer-drinker relational schema. Bars can sell beers, which are from different manufactories have different types. Drinkers frequents bars and like beers.</p>
</blockquote>
<p>1.List the number of beers that bars starting with B serve(all bars)<br>2.The set of bars and manf that have average price for the beers from  the same manufacturer more than 5 bucks<br>3.Unusual beer (A beer that is sold in the least number of bars)<br>4.Bars that serve all beers<br>5.Bars that have a beer Mike likes that is cheaper than in any bars Mike frequents<br>6.Bars that have maximum variety<br>7.Unusual manf per bar (A manufacturer that the current bar has the least number of beers from)<br><a id="more"></a><br><img src="/2015/09/19/some%20advanced%20sql%20programming/barbeerdrinker.png" title="Schema"></p>
<h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><ol>
<li><p>The set of bars and manf that have average price for the beers from  the same manufacturer more than 5 bucks</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar, b.manf, <span class="keyword">AVG</span>(s.price) <span class="keyword">as</span> avg_price</span><br><span class="line"><span class="keyword">FROM</span> sells s </span><br><span class="line"><span class="keyword">JOIN</span> beers b <span class="keyword">ON</span> s.beer = b.name</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar, b.manf</span><br><span class="line"><span class="keyword">HAVING</span> avg_price &gt; <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p> – Question: would the result set change if s.bar and b.manf switch places? No.</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar, b.manf, <span class="keyword">AVG</span>(s.price) <span class="keyword">as</span> avg_price</span><br><span class="line"><span class="keyword">FROM</span> sells s </span><br><span class="line"><span class="keyword">JOIN</span> beers b <span class="keyword">ON</span> s.beer = b.name</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> b.manf, s.bar</span><br><span class="line"><span class="keyword">HAVING</span> avg_price &gt; <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p> – Question: can we shift the condition to WHERE? No.<br> – The search condition can use aggregate and nonaggregate expressions in having clause, but only nonaggregate expressions in where clause.</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar, b.manf, <span class="keyword">AVG</span>(s.price) <span class="keyword">as</span> avg_price</span><br><span class="line"><span class="keyword">FROM</span> sells s <span class="keyword">JOIN</span> beers b <span class="keyword">ON</span> s.beer = b.name</span><br><span class="line"><span class="keyword">WHERE</span> avg_price &gt; <span class="number">5</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar, b.manf</span><br></pre></td></tr></table></figure>
<p> – Question: which field(s) can be used in having clause?<br> – Errors Maybe: </p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar <span class="keyword">FROM</span> sells s</span><br><span class="line"><span class="keyword">JOIN</span> beers b <span class="keyword">ON</span> b.name = s.beer</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar, b.manf</span><br><span class="line"><span class="keyword">HAVING</span> s.beer = <span class="string">'Budweiser'</span></span><br></pre></td></tr></table></figure>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> b.name</span><br><span class="line"><span class="keyword">FROM</span> sells s </span><br><span class="line"><span class="keyword">JOIN</span> beers b <span class="keyword">ON</span> b.name = s.beer</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar, b.manf</span><br><span class="line"><span class="keyword">HAVING</span> b.manf = <span class="string">'Anheuser-Busch'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>List the number of beers that bars starting with B serve(all bars)</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">as</span> beerCount</span><br><span class="line"><span class="keyword">FROM</span>( <span class="keyword">SELECT</span> <span class="keyword">distinct</span> sells.beer </span><br><span class="line">      <span class="keyword">FROM</span> sells </span><br><span class="line">      <span class="keyword">WHERE</span> (sells.bar&gt;<span class="string">"B"</span> <span class="keyword">or</span> sells.bar=<span class="string">"B"</span>) <span class="keyword">and</span> sells.bar&lt;<span class="string">"C"</span>) <span class="keyword">as</span> distinct_beers</span><br></pre></td></tr></table></figure>
<p> Alternative</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">as</span> beerCount</span><br><span class="line"><span class="keyword">FROM</span>( <span class="keyword">SELECT</span> <span class="keyword">distinct</span> sells.beer </span><br><span class="line">      <span class="keyword">FROM</span> sells </span><br><span class="line">      <span class="keyword">WHERE</span> <span class="keyword">substring</span>(sells.bar,<span class="number">1</span>,<span class="number">1</span>)=<span class="string">"B"</span>)  <span class="keyword">as</span> distinct_beers</span><br></pre></td></tr></table></figure>
<p> Alternative</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">as</span> beerCount</span><br><span class="line"><span class="keyword">FROM</span>( <span class="keyword">SELECT</span> <span class="keyword">distinct</span> sells.beer </span><br><span class="line">      <span class="keyword">FROM</span> sells </span><br><span class="line">      <span class="keyword">WHERE</span> <span class="keyword">LEFT</span>(sells.bar,<span class="number">1</span>)=<span class="string">"B"</span>)  <span class="keyword">as</span> distinct_beers</span><br></pre></td></tr></table></figure>
<p> Then if we want the beers number of every bar starting with “B”</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar, <span class="keyword">COUNT</span>(s.beer) </span><br><span class="line"><span class="keyword">FROM</span> sells s </span><br><span class="line"><span class="keyword">WHERE</span> s.bar <span class="keyword">LIKE</span> <span class="string">'B%'</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar</span><br></pre></td></tr></table></figure>
<p> – Question: Can we move the selection condition in the where clause to having clause? Yes.</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar, <span class="keyword">COUNT</span>(s.beer) </span><br><span class="line"><span class="keyword">FROM</span> sells s </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar</span><br><span class="line"><span class="keyword">HAVING</span> s.bar <span class="keyword">LIKE</span> <span class="string">'B%'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Unusual beer (A beer that is sold in the least number of bars)</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.beer <span class="keyword">FROM</span> sells s</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.beer</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(s.beer) &lt;= ALL(</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(s1.beer) <span class="keyword">FROM</span> sells s1</span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> s1.beer)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Bars that serve all beers</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ba.name </span><br><span class="line"><span class="keyword">FROM</span> bars <span class="keyword">as</span> ba</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>( <span class="keyword">SELECT</span> be.name </span><br><span class="line">                  <span class="keyword">FROM</span> beers <span class="keyword">as</span> be</span><br><span class="line">                  <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(<span class="keyword">SELECT</span> ba.name,be.name</span><br><span class="line">                                   <span class="keyword">FROM</span> sells <span class="keyword">as</span> s</span><br><span class="line">                                   <span class="keyword">WHERE</span> s.beer=be.name <span class="keyword">and</span> s.bar=ba.name))</span><br></pre></td></tr></table></figure>
<p> OR</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar </span><br><span class="line"><span class="keyword">FROM</span> sells s </span><br><span class="line"><span class="keyword">WHERE</span> (<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(s1.beer) <span class="keyword">FROM</span> sells s1 <span class="keyword">WHERE</span> s1.bar = s.bar) </span><br><span class="line">    =</span><br><span class="line">  (<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> beers)</span><br></pre></td></tr></table></figure>
<p> OR</p>
<p> – Do it with a GROUP BY    </p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar, <span class="keyword">COUNT</span>(s.beer)</span><br><span class="line"><span class="keyword">FROM</span> sells s</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(s.beer) = (<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> beers)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Bars that have a beer Mike likes that is cheaper than in any bars Mike frequents</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar <span class="keyword">FROM</span> sells s</span><br><span class="line"><span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> s1.beer <span class="keyword">AS</span> beer, <span class="keyword">MIN</span>(s1.price) <span class="keyword">AS</span> price</span><br><span class="line">      <span class="keyword">FROM</span> sells s1 </span><br><span class="line">        <span class="keyword">JOIN</span> frequents f <span class="keyword">ON</span> f.bar = s1.bar</span><br><span class="line">        <span class="keyword">JOIN</span> likes l <span class="keyword">ON</span> l.drinker = f.drinker </span><br><span class="line">            <span class="keyword">AND</span> l.beer = s1.beer</span><br><span class="line">      <span class="keyword">WHERE</span> f.drinker = <span class="string">'Mike'</span> </span><br><span class="line">      <span class="keyword">GROUP</span> <span class="keyword">BY</span> s1.beer) <span class="keyword">AS</span> Existing</span><br><span class="line"><span class="keyword">ON</span> s.beer = Existing.beer </span><br><span class="line">    <span class="keyword">AND</span> s.price &lt; Existing.price</span><br></pre></td></tr></table></figure>
</li>
<li><p>Bars that have maximum variety</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s1.bar <span class="keyword">FROM</span> sells s1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s1.bar</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(s1.beer) &gt;= </span><br><span class="line"> ALL(<span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(s.beer)</span><br><span class="line">    <span class="keyword">FROM</span> sells s</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar)</span><br></pre></td></tr></table></figure>
<p> OR</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s1.bar <span class="keyword">FROM</span> sells s1</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s1.bar</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(s1.beer) = (</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(temp.cnt) <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> s.bar, <span class="keyword">COUNT</span>(s.beer) <span class="keyword">AS</span> cnt</span><br><span class="line">                        <span class="keyword">FROM</span> sells s</span><br><span class="line">                        <span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar) <span class="keyword">as</span> temp)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Unusual manf per bar (A manufacturer that the current bar has the least number of beers from)</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.bar, b.manf</span><br><span class="line"><span class="keyword">FROM</span> sells s </span><br><span class="line"><span class="keyword">JOIN</span> beers b <span class="keyword">ON</span> s.beer = b.name</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.bar, b.manf</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(s.beer) &lt;= ALL(</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(s1.beer) </span><br><span class="line">    <span class="keyword">FROM</span> sells s1 </span><br><span class="line">    <span class="keyword">JOIN</span> beers b1 <span class="keyword">ON</span> s1.beer = b1.name</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> s1.bar, b1.manf</span><br><span class="line">    <span class="keyword">HAVING</span> s1.bar = s.bar)</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      
        <categories>
            
            <category> system </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Sql </tag>
            
            <tag> database </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu给桌面环境注册程序]]></title>
      <url>/2015/06/20/2015-6-20-ubuntu%E4%B8%8B%E8%A7%A3%E5%86%B3sublime%E6%97%A0%E6%B3%95%E8%BE%93%E5%85%A5%E4%B8%AD%E6%96%87/</url>
      <content type="html"><![CDATA[<blockquote>
<p>sublime 在ubuntu下不支持中文输入法，这对于开发来说难免有很多不方便的地方</p>
</blockquote>
<h2 id="使用自定义程序方法启动sublime2-sublime3"><a href="#使用自定义程序方法启动sublime2-sublime3" class="headerlink" title="使用自定义程序方法启动sublime2./sublime3"></a>使用自定义程序方法启动sublime2./sublime3</h2><p>首先，我们进入sublime的配置目录下：   </p>
<p><code>cd /opt/sublime-text2</code></p>
<p>这里，我们新建一个代码文件来进行编译生成我们的自定义程序</p>
<p><code>sudo touch sublime-imfix.c</code><br><a id="more"></a><br>打开文件</p>
<p><code>sudo gedit sublime-imfix.c</code></p>
<p>然后输入以下代码</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">sublime-imfix.c</span></span><br><span class="line"><span class="comment">Use LD_PRELOAD to interpose some function to fix sublime input method support for linux.</span></span><br><span class="line"><span class="comment">By Cjacker Huang &lt;jianzhong.huang at i-soft.com.cn&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">gcc -shared -o libsublime-imfix.so sublime_imfix.c  `pkg-config --libs --cflags gtk+-2.0` -fPIC</span></span><br><span class="line"><span class="comment">LD_PRELOAD=./libsublime-imfix.so sublime_text</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;gtk/gtk.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;gdk/gdkx.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> GdkSegment GdkRegionBox;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> _<span class="title">GdkRegion</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">long</span> size;</span><br><span class="line">  <span class="keyword">long</span> numRects;</span><br><span class="line">  GdkRegionBox *rects;</span><br><span class="line">  GdkRegionBox extents;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">GtkIMContext *local_context;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span></span><br><span class="line">gdk_region_get_clipbox (<span class="keyword">const</span> GdkRegion *region,</span><br><span class="line">            GdkRectangle    *rectangle)</span><br><span class="line">&#123;</span><br><span class="line">  g_return_if_fail (region != <span class="literal">NULL</span>);</span><br><span class="line">  g_return_if_fail (rectangle != <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">  rectangle-&gt;x = region-&gt;extents.x1;</span><br><span class="line">  rectangle-&gt;y = region-&gt;extents.y1;</span><br><span class="line">  rectangle-&gt;width = region-&gt;extents.x2 - region-&gt;extents.x1;</span><br><span class="line">  rectangle-&gt;height = region-&gt;extents.y2 - region-&gt;extents.y1;</span><br><span class="line">  GdkRectangle rect;</span><br><span class="line">  rect.x = rectangle-&gt;x;</span><br><span class="line">  rect.y = rectangle-&gt;y;</span><br><span class="line">  rect.width = <span class="number">0</span>;</span><br><span class="line">  rect.height = rectangle-&gt;height; </span><br><span class="line">  <span class="comment">//The caret width is 2; </span></span><br><span class="line">  <span class="comment">//Maybe sometimes we will make a mistake, but for most of the time, it should be the caret.</span></span><br><span class="line">  <span class="keyword">if</span>(rectangle-&gt;width == <span class="number">2</span> &amp;&amp; GTK_IS_IM_CONTEXT(local_context)) &#123;</span><br><span class="line">        gtk_im_context_set_cursor_location(local_context, rectangle);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//this is needed, for example, if you input something in file dialog and return back the edit area</span></span><br><span class="line"><span class="comment">//context will lost, so here we set it again.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> GdkFilterReturn <span class="title">event_filter</span> <span class="params">(GdkXEvent *xevent, GdkEvent *event, gpointer im_context)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    XEvent *xev = (XEvent *)xevent;</span><br><span class="line">    <span class="keyword">if</span>(xev-&gt;type == KeyRelease &amp;&amp; GTK_IS_IM_CONTEXT(im_context)) &#123;</span><br><span class="line">       GdkWindow * win = g_object_get_data(G_OBJECT(im_context),<span class="string">"window"</span>);</span><br><span class="line">       <span class="keyword">if</span>(GDK_IS_WINDOW(win))</span><br><span class="line">         gtk_im_context_set_client_window(im_context, win);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> GDK_FILTER_CONTINUE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">gtk_im_context_set_client_window</span> <span class="params">(GtkIMContext *context,</span></span></span><br><span class="line"><span class="function"><span class="params">          GdkWindow    *window)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  GtkIMContextClass *klass;</span><br><span class="line">  g_return_if_fail (GTK_IS_IM_CONTEXT (context));</span><br><span class="line">  klass = GTK_IM_CONTEXT_GET_CLASS (context);</span><br><span class="line">  <span class="keyword">if</span> (klass-&gt;set_client_window)</span><br><span class="line">    klass-&gt;set_client_window (context, window);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span>(!GDK_IS_WINDOW (window))</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  g_object_set_data(G_OBJECT(context),<span class="string">"window"</span>,window);</span><br><span class="line">  <span class="keyword">int</span> width = gdk_window_get_width(window);</span><br><span class="line">  <span class="keyword">int</span> height = gdk_window_get_height(window);</span><br><span class="line">  <span class="keyword">if</span>(width != <span class="number">0</span> &amp;&amp; height !=<span class="number">0</span>) &#123;</span><br><span class="line">    gtk_im_context_focus_in(context);</span><br><span class="line">    local_context = context;</span><br><span class="line">  &#125;</span><br><span class="line">  gdk_window_add_filter (window, event_filter, context); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来，安装C/C++的编译环境和gtk libgtk2.0-dev</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install build-essential</span><br><span class="line">sudo apt-get install libgtk2.0-dev</span><br></pre></td></tr></table></figure>
<p>如果在安装libgtk2.0-dev时发现us的源难以连接，则将source.list软件源替换为国内源地址，可以使用<br><a href="http://mirrors.163.com/.help/ubuntu.html" target="_blank" rel="noopener">163的镜像地址</a>然后进行下载。下载完成后对c程序进行编译：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -shared -o libsublime-imfix.so sublime-imfix.c  `pkg-config --libs --cflags gtk+-2.0` -fPIC</span><br></pre></td></tr></table></figure>
<p>编译完成后，为了点击图标能够自动打开程序，我们对sublime-2.desktop进行修改：</p>
<p><code>sudo gedit /usr/share/applications/sublime-text.desktop</code></p>
<p>修改快捷方式的启动，修改如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Version=1.0</span><br><span class="line">Type=Application</span><br><span class="line">Name=Sublime Text</span><br><span class="line">GenericName=Text Editor</span><br><span class="line">Comment=Sophisticated text editor for code, markup and prose</span><br><span class="line">Exec=bash -c &apos;LD_PRELOAD=/opt/sublime_text_2/libsublime-imfix.so /opt/sublime_text_2/sublime_text&apos; %F</span><br><span class="line">Terminal=false</span><br><span class="line">MimeType=text/plain;</span><br><span class="line">Icon=sublime-text</span><br><span class="line">Categories=TextEditor;Development;Utility;</span><br><span class="line">StartupNotify=true</span><br><span class="line">Actions=Window;Document;</span><br><span class="line"></span><br><span class="line">X-Desktop-File-Install-Version=0.22</span><br><span class="line"></span><br><span class="line">[Desktop Action Window]</span><br><span class="line">Name=New Window</span><br><span class="line">Exec=bash -c &apos;LD_PRELOAD=/opt/sublime_text_2/libsublime-imfix.so /opt/sublime_text_2/sublime_text&apos; -n</span><br><span class="line">OnlyShowIn=Unity;</span><br><span class="line"></span><br><span class="line">[Desktop Action Document]</span><br><span class="line">Name=New File</span><br><span class="line">Exec=bash -c &apos;LD_PRELOAD=/opt/sublime_text_2/libsublime-imfix.so /opt/sublime_text_2/sublime_text&apos; --command new_file</span><br><span class="line">OnlyShowIn=Unity;</span><br></pre></td></tr></table></figure>
<p>其中主要是exec的修改，其他不用修改。以后启动直接点击桌面图表或者dash中的图标启动，会调用desktop中的代码，如果使用terminal直接启动则依然不能使用中文。</p>
]]></content>
      
        <categories>
            
            <category> system </category>
            
        </categories>
        
        
        <tags>
            
            <tag> setup </tag>
            
            <tag> ubuntu </tag>
            
            <tag> sublime </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[外文常用搜索技巧]]></title>
      <url>/2015/06/04/2015-6-4-%E5%A4%96%E6%96%87%E5%B8%B8%E7%94%A8%E6%90%9C%E7%B4%A2%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<p></p><p class="message"><br>注：以下内容来源于<a href="http://www.lib.tongji.edu.cn/site/tongji/index.html" target="_blank" rel="noopener">同济大学图书馆</a>的讲座笔记，感谢图书馆老师对搜索技巧的分享！<br></p><p></p>
<h2 id="如何用谷歌搜索"><a href="#如何用谷歌搜索" class="headerlink" title="如何用谷歌搜索"></a>如何用谷歌搜索</h2><h3 id="常用域名"><a href="#常用域名" class="headerlink" title="常用域名"></a>常用域名</h3><ul>
<li>谷歌香港 <a href="http://www.google.com.hk" target="_blank" rel="noopener">www.google.com.hk</a></li>
<li>镜像站   <a href="http://www.gotosearch.info" target="_blank" rel="noopener">www.gotosearch.info</a>(墙内可用)       </li>
<li>谷粉搜搜 <a href="http://www.gfsoso.net" target="_blank" rel="noopener">www.gfsoso.net</a>(墙内可用)  <a id="more"></a>
###常用关系词</li>
<li>空格表示逻辑与 </li>
<li>OR 逻辑或 </li>
<li>空格- 表示逻辑非</li>
</ul>
<h3 id="搜索限定"><a href="#搜索限定" class="headerlink" title="搜索限定"></a>搜索限定</h3><ul>
<li>标题限定 allintitle: </li>
<li>文本搜索 allintext:  </li>
<li>网址    allinurl:</li>
<li>指向网页链接  allinanchor:</li>
<li>限定一个词 intitle:</li>
<li>限定一个词在网址中:  inurl:</li>
<li>..  1..800 </li>
<li><ul>
<li>通配符 </li>
</ul>
</li>
</ul>
<blockquote>
<p>example: allintitle: “高速公路”  “交通组织” 施工 OR 大修 OR 扩建<br>其中 OR 优先执行， 双引号表示精确搜索</p>
</blockquote>
<h3 id="site-语句的额用法"><a href="#site-语句的额用法" class="headerlink" title="site:语句的额用法"></a>site:语句的额用法</h3><ul>
<li>site: sina.com.cn</li>
<li>site: .edu</li>
<li>site: www.sina.com.cn</li>
<li>site: book.*  </li>
</ul>
<h3 id="filetype-语句的用法"><a href="#filetype-语句的用法" class="headerlink" title="filetype: 语句的用法"></a>filetype: 语句的用法</h3><ul>
<li>filetype: </li>
</ul>
<h3 id="谷歌学术"><a href="#谷歌学术" class="headerlink" title="谷歌学术"></a>谷歌学术</h3><ul>
<li>跨库搜索</li>
</ul>
<h3 id="中国知网"><a href="#中国知网" class="headerlink" title="中国知网"></a>中国知网</h3><ul>
<li>SU=数据挖掘 AND TI%（预测+分析）<br>##外文学术检索<br>###选择数据库<br>####需要考虑因素</li>
<li>学科针对性</li>
<li>文献量</li>
<li>检索功能</li>
<li>更新频率</li>
</ul>
<h4 id="常用数据库"><a href="#常用数据库" class="headerlink" title="常用数据库"></a>常用数据库</h4><ul>
<li>Springer Link 综合性全文数据库，德国springer出版公司，出版商</li>
<li>Elesvier  ScienceDirect平台， 综合性全文数据库, 出版商</li>
<li>EBSCO Academic Search Complete,综合性全文数据库，非出版商，较全</li>
<li>SCI-E 综合性文摘数据库，收录１２８中</li>
<li>CPCI-S  综合性会议文摘数据库</li>
<li>PQDD　全文数据库，博士硕士学位论文</li>
<li>PQDD 文摘数据库</li>
<li><code>INSPEC</code> 综合性文摘数据库</li>
<li><code>EI compendex</code>  综合性文摘数据库，美国工程索引</li>
</ul>
<h4 id="EI-概况"><a href="#EI-概况" class="headerlink" title="EI 概况"></a>EI 概况</h4><p>Compendex 美国工程索引数据库的名称， EI 是世界三大检索工具之一，工科首选。80000+会议，3800+期刊，83书籍系列，每周更新，每周跟新20000多。其中电子电气占比29%.</p>
<h4 id="INSPEC-概况"><a href="#INSPEC-概况" class="headerlink" title="INSPEC 概况"></a>INSPEC 概况</h4><p>SA，英国科学文摘，来自68个国家，5000+期刊，70000+会议。其中计算机占比30%.</p>
<h3 id="Engineering-Village"><a href="#Engineering-Village" class="headerlink" title="Engineering Village"></a>Engineering Village</h3><h4 id="检索方式"><a href="#检索方式" class="headerlink" title="检索方式"></a>检索方式</h4><ul>
<li>Quick search 快速紧缩</li>
<li>Expert search 专业检索</li>
<li>包含EI和SA</li>
<li>自动推荐，限定范围，autostemming:自动取词根，检索历史，检索结果排序</li>
<li>Search Tips</li>
<li>建议注册</li>
</ul>
<blockquote>
<p>专业检索有搜索代码表</p>
</blockquote>
<h4 id="检索技巧"><a href="#检索技巧" class="headerlink" title="检索技巧"></a>检索技巧</h4><ul>
<li>布尔</li>
<li>字段代码表</li>
<li>常用字段： Title（TI），subject/title/abstract (KY)主题字段，source title(ST)  来源出版物</li>
<li>eg: (verhicle) wn ti and (tongji) wn af and (English) wn la</li>
<li>二次限定搜索（limit to，exclude）</li>
</ul>
<h4 id="个人定制服务"><a href="#个人定制服务" class="headerlink" title="个人定制服务"></a>个人定制服务</h4><ul>
<li>注册账号可以定制检索策略，包括<code>邮件通知</code>等;</li>
<li>自己邮件的工程索引收录：可以利用<code>邮件服务</code>进行通知;</li>
<li>对领域最新动态，或者某个人，利用<code>邮件服务</code>进行通知;</li>
<li><code>RSS订阅</code>服务，和邮件服务类似;</li>
<li>建立<code>项目组</code>标签;</li>
<li>最多可以创建三个<code>文件夹</code>，每个最多<code>50个文献</code>，项目组较多;</li>
<li>detail中有通讯作者，检索号等信息;</li>
<li><code>项目组</code>和<code>标签</code>，有个<em>pubic项目组</em>; 可以创建自己的<em>标签</em>然后添加文章；可以创建<em>项目组</em>和添加成员，共享文章;<em>项目组</em>可以添加<em>标签</em>，可以邀请成员。</li>
</ul>
<h4 id="搜索实例"><a href="#搜索实例" class="headerlink" title="搜索实例"></a>搜索实例</h4><ol>
<li>确定关键词,包含同义词，近义词；其他相关词，辅助搜索;</li>
<li>单复数可以用*来代替，双引号”computer”表示精确搜索，避免分词;</li>
<li>有限定词使用专业检索服务;</li>
<li>有去重功能</li>
</ol>
<h3 id="检索web-of-science平台"><a href="#检索web-of-science平台" class="headerlink" title="检索web of science平台"></a>检索web of science平台</h3><h4 id="包含数据库"><a href="#包含数据库" class="headerlink" title="包含数据库"></a>包含数据库</h4><ul>
<li>SCI-E</li>
<li>CPCS-S</li>
</ul>
<h3 id="检索Elsevier的ScienceDirect平台"><a href="#检索Elsevier的ScienceDirect平台" class="headerlink" title="检索Elsevier的ScienceDirect平台"></a>检索Elsevier的ScienceDirect平台</h3><ul>
<li>自动考虑单复数及时态变化，不用自己限制</li>
</ul>
<h3 id="PQDD文摘数据库"><a href="#PQDD文摘数据库" class="headerlink" title="PQDD文摘数据库"></a>PQDD文摘数据库</h3><ul>
<li>文摘数据库</li>
<li>检索字段很多</li>
</ul>
<h3 id="谷歌学生搜索"><a href="#谷歌学生搜索" class="headerlink" title="谷歌学生搜索"></a>谷歌学生搜索</h3><h4 id="检索表达式"><a href="#检索表达式" class="headerlink" title="检索表达式"></a>检索表达式</h4><ul>
<li>同[谷歌搜索]相同</li>
</ul>
]]></content>
      
        <categories>
            
            <category> research </category>
            
        </categories>
        
        
        <tags>
            
            <tag> research </tag>
            
            <tag> search </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu给桌面环境注册程序]]></title>
      <url>/2015/05/31/2015-5-31-Ubuntu%E7%BB%99%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83%E6%B3%A8%E5%86%8C%E7%A8%8B%E5%BA%8F/</url>
      <content type="html"><![CDATA[<p>ubuntu dash home中每个图标对应<code>/usr/share/applications</code>当中的一个配置文件（文件名后缀为.desktop)。所以要在dash home中添加一个自定义程序启动器，需要在该文件目录下创建对应的配置文件。至于配置文件的语法，参考该目录下的配置文件即可明白。<br>以eclipse为例，方法如下。<br><a id="more"></a><br>系统：ubuntu14.10  64位系统<br>方法：</p>
<ol>
<li><p>在<code>/usr/share/applications</code>目录下创建eclipse启动器配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/share/applications</span><br><span class="line">vim eclipse.desktop</span><br></pre></td></tr></table></figure>
</li>
<li><p>编辑eclipse.desktop并保存。简单的配置示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Version=1.0</span><br><span class="line">Name=eclipse</span><br><span class="line">Exec=/home/hu/soft/eclipse/eclipse</span><br><span class="line">Terminal=false</span><br><span class="line">Icon=/home/hu/soft/eclipse/icon.xpm</span><br><span class="line">Type=Application</span><br><span class="line">Categories=Development</span><br></pre></td></tr></table></figure>
</li>
</ol>
]]></content>
      
        <categories>
            
            <category> system </category>
            
        </categories>
        
        
        <tags>
            
            <tag> setup </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[组建内外网文件服务器]]></title>
      <url>/2014/11/02/%E7%BB%84%E5%BB%BA%E5%86%85%E5%A4%96%E7%BD%91%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/</url>
      <content type="html"><![CDATA[<h3 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h3><p class="message"><br>最近实验室老板要求，要将实验室内部的文件共享服务器能够通过实验室域名进行访问。因此，我们的目标是组建一个内网可以访问并且在内网各个主机都能通过smb协议来对文件服务器进行维护，外网网页能够访问文件内容。<br></p>

<h3 id="权限说明"><a href="#权限说明" class="headerlink" title="权限说明"></a>权限说明</h3><p class="message"><br>内网： 对服务器读写权限，通过smb协议进行文件访问，即共享文件夹的方式；<br><br>外网： 能够通过域名在网页上访问内部文件进行下载，仅有读的权限<br></p>

<a id="more"></a>
<h3 id="软件环境"><a href="#软件环境" class="headerlink" title="软件环境"></a>软件环境</h3><p>1.Ubuntu 14.10系统，外网使用Apache进行访问；</p>
<p>2.外网域名为<a href="http://ilab.tongji.edu.cn" target="_blank" rel="noopener">ilab.tongji.edu.cn</a>.内网域名为192.168.1.10, 通过端口映射将外网映射到内网80端口。</p>
<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><h4 id="1-内网服务器创建-共享目录创建"><a href="#1-内网服务器创建-共享目录创建" class="headerlink" title="1.内网服务器创建-共享目录创建"></a>1.内网服务器创建-共享目录创建</h4><ol>
<li><p>下载samba提供共享文件服务</p>
<p> <code>sudo apt-get install samba</code></p>
</li>
<li><p>创建共享目录</p>
<p> <code>mkdir /home/administrator/ilab_ftp/ilab</code></p>
</li>
<li><p>备份现有的配置文件</p>
<p> <code>sudo cp /etc/samba/smb.conf /etc/samba/smb.conf_back_up</code></p>
</li>
<li><p>修改smb.conf文件</p>
<p> <code>sudo gedit /etc/samba/smb.conf</code></p>
</li>
<li>在smb.conf中添加<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[ilab]</span><br><span class="line">comment = Shared Folder with username <span class="keyword">and</span> password</span><br><span class="line">path=/home/administrator/ilab_ftp/ilab  </span><br><span class="line"><span class="keyword">public</span>=yes</span><br><span class="line">writable=yes</span><br><span class="line">valid users = ilab</span><br><span class="line">create mask = <span class="number">7777</span>    #<span class="number">7777</span> 掩码为放开权限，防止外网不能访问</span><br><span class="line">directory mask = <span class="number">7777</span></span><br><span class="line">force user = administrator</span><br><span class="line">force group = administrator</span><br><span class="line">available = yes</span><br><span class="line">browseable = yes</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>6.为samba添加用户，可以直接使用administrator，为了安全，这里先创建一个新的系统用户，然后为其设置samba密码</p>
<p>   <code>sudo useradd ilab</code> <br><br>   <code>sudo smbpasswd -a ilab</code> <br><br>    然后要求输入新密码，我设置为123456 <br></p>
<p>7.现在内网用户可以直接输入smb://192.168.1.10访问文件并读写了。 windows用户点击 <code>微软键+R</code> 后输入 <code>\\192.168.1.10</code></p>
<h3 id="设置外网访问"><a href="#设置外网访问" class="headerlink" title="设置外网访问"></a>设置外网访问</h3><ol>
<li>右键点击/<code>home/administrator/ilab_ftp/ilab</code>，即共享文件夹，然后点击生成链接（<em>make link</em>）. 将其复制在外网映射的Apache目录下，设置权限<br><code>sudo chmod 777 ilab</code><br></li>
<li>外网可以直接访问 <a href="http://ilab.tongji.edu.cn/ilab" target="_blank" rel="noopener">ilab.tongji.edu.cn/ilab</a></li>
</ol>
]]></content>
      
        <categories>
            
            <category> system </category>
            
        </categories>
        
        
        <tags>
            
            <tag> Ubuntu </tag>
            
            <tag> setup </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
